{"version":3,"sources":["../server/issue.js"],"names":["validateIssue","validIssueStatus","New","Open","Assigned","Fixed","Verified","Closed","issueFieldType","status","owner","effort","created","completionDate","title","issue","field","type","module","exports"],"mappings":";;;;;kBAAe;AACXA,mBAAeA;AADJ,C;;AAIf;AACA;;AACA,MAAMC,mBAAmB;AACrBC,SAAK,IADgB;AAErBC,UAAM,IAFe;AAGrBC,cAAU,IAHW;AAIrBC,WAAO,IAJc;AAKrBC,cAAU,IALW;AAMrBC,YAAQ;AANa,CAAzB;AAQA,MAAMC,iBAAiB;AACnBC,YAAQ,UADW;AAEnBC,WAAO,UAFY;AAGnBC,YAAQ,UAHW;AAInBC,aAAS,UAJU;AAKnBC,oBAAgB,UALG;AAMnBC,WAAO;AANY,CAAvB;AAQA;AACA,SAASd,aAAT,CAAuBe,KAAvB,EAA8B;AAC1B,SAAK,MAAMC,KAAX,IAAoBR,cAApB,EAAoC;AAChC,cAAMS,OAAOT,eAAeQ,KAAf,CAAb;AACA,YAAI,CAACC,IAAL,EAAW;AACP;AACA,mBAAOF,MAAMC,KAAN,CAAP;AACH,SAHD,MAGO,IAAIC,SAAS,UAAT,IAAuB,CAACF,MAAMC,KAAN,CAA5B,EAA0C;AAC7C,mBAAQ,GAAEA,KAAM,eAAhB;AACH;AACJ;AACD,QAAI,CAACf,iBAAiBc,MAAMN,MAAvB,CAAL,EACI,OAAQ,GAAEM,MAAMN,MAAO,wBAAvB;;AAEJ,WAAO,IAAP;AACH;;AAEDS,OAAOC,OAAP,GAAiB;AACbnB,mBAAeA;AADF,CAAjB","file":"issue.js","sourcesContent":["export default {\n    validateIssue: validateIssue\n};\n\n// validIssueStatus and issueFieldType are global objects\n// these are a kind of schema definition to indicate what is a valid issue object\nconst validIssueStatus = {\n    New: true,\n    Open: true,\n    Assigned: true,\n    Fixed: true,\n    Verified: true,\n    Closed: true,\n};\nconst issueFieldType = {\n    status: 'required',\n    owner: 'required',\n    effort: 'optional',\n    created: 'required',\n    completionDate: 'optional',\n    title: 'required',\n};\n// validateIssue checks against the specification and returns an error if the validation fails.\nfunction validateIssue(issue) {\n    for (const field in issueFieldType) {\n        const type = issueFieldType[field];\n        if (!type) {\n            // any fields that do not belong are deleted.\n            delete issue[field];\n        } else if (type === 'required' && !issue[field]) {\n            return `${field} is required.`;\n        }\n    }\n    if (!validIssueStatus[issue.status])\n        return `${issue.status} is not a valid status`;\n\n    return null;\n}\n\nmodule.exports = {\n    validateIssue: validateIssue\n}"]}